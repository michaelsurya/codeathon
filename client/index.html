<html>
    <head>
        <meta charset="UTF-8" />
        <title>Multiplayer Experiment</title>
        <!-- Load the Phaser game library -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/2.4.2/phaser.min.js"></script>
        <!-- Load the Socket.io networking library -->
        <script src="/socket.io/socket.io.js"></script>

        <!-- Some simple styles and fonts -->
        <style type="text/css">
            body,html { /* Remove margins */
                margin: 0px;
                position: relative;
            }
            canvas { /* Center the canvas */
                margin:auto;
                /*border: 1px solid black;*/
            }
        </style>
    </head>
    <body>
        <script type="text/javascript">
            //We first initialize the phaser game object
            var WINDOW_WIDTH = 640;
            var WINDOW_HEIGHT = 640;
            var game = new Phaser.Game(WINDOW_WIDTH, WINDOW_HEIGHT, Phaser.AUTO, '', 
            {preload:preload, create:create, update:GameLoop} );

            var tiles = [];
            var bullet_array = [];
          
            var socket; //Declare it in this scope, initialize in the `create` function
            var other_players = {};



            function preload(){
                //Load maps and sprites
                game.load.spritesheet('characters', 'assets/sprites/golem.png', 32, 32);
                game.load.image('fireball', 'assets/sprites/fireball.png');
                game.load.tilemap('level', 'assets/maps/map.json', null, Phaser.Tilemap.TILED_JSON);
                game.load.image('tiles', 'assets/sprites/dungeon.png');

            	//Load audio assets
		        game.load.audio('hit', 'assets/sounds/hit.wav');
            }

            function create(){
                //Load tileset to the game
                var map = game.add.tilemap('level');
                map.addTilesetImage('dungeon', 'tiles');

                game.world.setBounds(0, 0, 640, 640);
                map.setCollision([1,2,3,4,5,6,11,16,21,26,31,36,41,41,42,43,44,45,46,51,52,53,54,55,56,67,68,79]);
                layer = map.createLayer('Tile Layer 1');
                game.physics.enable(self.layer, Phaser.Physics.ARCADE);

            }

            function GameLoop(){
            }

        </script>
    </body>
</html>